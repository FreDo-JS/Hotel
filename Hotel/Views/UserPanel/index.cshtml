<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Użytkownika</title>
    <link rel="stylesheet" href="~/css/style.css" asp-append-version="true">
</head>
<body>
    <header class="userProfile">
        <img src="~/img/ss.png" alt="logo">
    </header>
    <main>
        <h1 class="profile-text">Witaj na swoim koncie <span class="profileName">@ViewBag.UserName</span></h1>
        <div class="profileBox">
            <div class="leftProfile">
                <ul>
                    <li><a href="#mojeKonto">Moje konto</a></li>
                    <li><a href="#historiaRezerwacji">Historia rezerwacji</a></li>
                    <li><a href="#uslugiDodatkowe">Usługi dodatkowe</a></li>
                </ul>
            </div>
            <div class="RightProfile">
                <h2 id="mojeKonto">Twoje dane</h2>
                <p>Imię: <span>@ViewBag.FirstName</span></p>
                <p>Nazwisko: <span>@ViewBag.LastName</span></p>
                <p>Email: <span>@ViewBag.Email</span></p>

                <h2 id="historiaRezerwacji">Historia rezerwacji</h2>
                @if (ViewBag.Reservations != null && ViewBag.Reservations.Count > 0)
                {
                    <ul>
                        @foreach (var reservation in ViewBag.Reservations)
                        {
                            <li>
                                Pokój: <strong>@reservation.RoomNumber</strong><br>
                                Numer rezerwacji: <strong>@reservation.ReservationId</strong> <br>
                                Termin: @reservation.CheckInDate.ToString("yyyy-MM-dd") - @reservation.CheckOutDate.ToString("yyyy-MM-dd")<br>
                                Status: <strong>@reservation.Status</strong>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p>Brak historii rezerwacji.</p>
                }

                <h2 id="uslugiDodatkowe">Usługi</h2>
                <p>
                    W sprawie usług prosimy naszych użytkowników o kontakt drogą telefoniczną:
                    <strong>0700 666 21</strong>
                </p>
                <h2>Zmień swoją rolę</h2>
                <form method="post" action="/UserPanel/ChangeRole">
                    <label for="role">Wybierz nową rolę:</label>
                    <select name="newRole" id="role" required>
                        <option value="rezydent">Rezydent</option>
                        <option value="pracownik">Pracownik</option>
                        <option value="administrator">Administrator</option>
                    </select>
                    <button type="submit">Zmień rolę</button>
                </form>

                @if (TempData["Success"] != null)
                {
                    <p style="color: green;">@TempData["Success"]</p>
                }
                @if (TempData["Error"] != null)
                {
                    <p style="color: red;">@TempData["Error"]</p>
                }

            </div>
        </div>
    </main>
</body>
</html>
